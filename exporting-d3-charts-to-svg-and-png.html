<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <title>Exporting D3 charts to SVG and PNG: a library - Thibaud’s blog</title>

  <link rel="stylesheet" href="/css/screen.css">

  
  <meta name="description" content="Lately I’ve been very interested in the topic of exporting PNG or SVG assets from D3 charts created with SVG and CSS. This is a very important topic because ...">
  <meta name="author" content="Thibaud Colas"><link rel="canonical" href="https://thib.me/exporting-d3-charts-to-svg-and-png">
  <link href="/favicon.ico" rel="shortcut icon">
  <link href="/atom.xml" rel="alternate" title="Thibaud’s blog" type="application/atom+xml">

  <meta name="twitter:card" content="summary_large_image">
  <meta property="og:url" content="https://thib.me/exporting-d3-charts-to-svg-and-png">
  <meta property="og:type" content="article">
  <meta property="og:site_name" content="Thibaud’s blog">
  <meta name="twitter:site" content="@thibaud_colas">
  <meta name="twitter:creator" content="@thibaud_colas">
  <meta property="og:title" content="Exporting D3 charts to SVG and PNG: a library">
  <meta property="og:description" content="Lately I’ve been very interested in the topic of exporting PNG or SVG assets from D3 charts created with SVG and CSS. This is a very important topic because ...">
  
  <meta name="twitter:label1" value="Reading time">
  <meta name="twitter:data1" value="Not too long">

  <link rel="meta" title="FOAF" type="application/rdf+xml" href="/foaf.rdf">

  
  <script>
    window.ga=function(){ga.q.push(arguments)};ga.q=[];ga.l=+new Date;
    ga('create','UA-34692999-4','auto');ga('send','pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>


</head>

<body   >
  <header><hgroup>
  <h1><a href="/">Thibaud’s blog</a></h1>
  
    <h2>Notes, thoughts, and open-source software</h2>
  
</hgroup>

</header>
  <nav>  
<ul class="main-navigation">
  <li><a href="https://twitter.com/thibaud_colas">Twitter</a></li>
  <li><a href="https://github.com/thibaudcolas">GitHub</a></li>
  <li><a href="/resume" data-no-instant>Resume</a></li>
  <li><a href="/about/">About</a></li>
</ul>

</nav>
  <div role="main" id="main">
    <div id="content">
      <div class="blog-index">
<article class="hentry">
  
  <header>
    
      <a class="edit-link" aria-label="Edit this page on GitHub" href="https://github.com/thibaudcolas/thibaudcolas/edit/main/src/_posts/2016-02-10-exporting-d3-charts-to-svg-and-png.md">Edit</a>
      <h1 class="entry-title">Exporting D3 charts to SVG and PNG: a library</h1>
    
    
      <p class="meta">
        









<time datetime="2016-02-09T23:46:18+00:00" pubdate data-updated="true">2016-02-09 23:46</time>
        
      </p>
    
  </header>


<div class="entry-content" data-no-instant><p>Lately I’ve been very interested in the topic of exporting PNG or SVG assets from D3 charts created with SVG and CSS. This is a very important topic because those exports are often a big selling point of paid data visualizations libraries, and rightfully so – you can’t reuse a dynamic D3 chart as easily as a static asset.</p>

<!-- more -->

<p>I have been watching for techniques to do this for a while now, and only recently stumbled upon <a href="https://github.com/exupero/saveSvgAsPng">saveSvgAsPng</a>. This takes care of a lot of the heavylifting:</p>

<ul>
  <li>Getting the chart’s SVG from the DOM.</li>
  <li>Inlining stylesheets into this SVG.</li>
  <li>Inlining images as well.</li>
  <li>Putting all of this in an image tag, and passing it through a canvas to end up with a PNG.</li>
</ul>

<p>While none of those steps taken individually are hard to build, their combination is tricky to get right. The limitation here is that those exports need to be generated on the fly within a browser – this isn’t built for a use case where generated images need to be readily avaible for each chart.</p>

<p>This is where <a href="http://electron.atom.io/">Electron</a> comes into play. Electron is a wrapper around <a href="http://www.chromium.org/developers/content-module">Chromium’s rendering stack</a> (the Blink rendering engine, V8, and other important goodies). We can use this semi-headless browser to render our charts and export them!</p>

<p>I ended up writing a library that does just that: <a href="https://github.com/thibaudcolas/export-svg-chart">https://github.com/thibaudcolas/export-svg-chart</a>. I don’t like reinventing the wheel so this is just an elegant wrapper around the tools mentioned above, with a very straightforward API.</p>

<p>If you want to use this library, you’ll need to point it to a page where to extract your chart from – you can make this page use custom “export / print” styles, or just use the same rendering as the one of your default dynamic chart.</p>

<p>There’s a more technical write-up of my findings on GitHub here: https://github.com/thibaudcolas/chart-export-example. I also tried to make this work in <a href="https://github.com/tmpvar/jsdom">jsdom</a>, but didn’t go with that solution since it came with too many trade-offs.</p>
</div>



  <footer>
    <p class="meta">
      
<span class="byline author vcard">By <span class="fn">Thibaud Colas</span></span>

      









<time datetime="2016-02-09T23:46:18+00:00" pubdate data-updated="true">2016-02-09 23:46</time>
      

<span class="categories">
  
    
      <a class="category" href="/categories/javascript/">JavaScript</a>,
    
      <a class="category" href="/categories/dataviz/">Dataviz</a>,
    
      <a class="category" href="/categories/d3/">D3</a>
    
  
</span>


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/line-chart-interaction" title="Previous Post: Line chart interaction overlay">&laquo; Line chart interaction overlay</a>
      
      
        <a class="basic-alignment right" href="/a-stable-front-end-stack-for-2016" title="Next Post: A stable front-end stack for 2016">A stable front-end stack for 2016 &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/outreachy-welcoming-new-contributors-to-open-source">Outreachy: welcoming new contributors to open source</a>
      </li>
    
      <li class="post">
        <a href="/google-summer-of-code-2022-for-wagtail">Google Summer of Code 2022 for Wagtail</a>
      </li>
    
      <li class="post">
        <a href="/the-97-4-percent-north-star">MiXiT 2022: The 97.4% North Star</a>
      </li>
    
      <li class="post">
        <a href="/state-of-wagtail-wagtail-space-us-2022">The State of Wagtail - Wagtail Space US 2022</a>
      </li>
    
      <li class="post">
        <a href="/state-of-wagtail-accessibility">State of Wagtail’s accessibility</a>
      </li>
    
  </ul>
</section>

  
<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos" data-user="thibaudcolas" data-count="5">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/thibaudcolas">@thibaudcolas</a> on GitHub
  
  <script src="/javascripts/github.js"></script>
</section>


</aside>


    </div>
  </div>
  <footer><p>
  By <a href="" rel="author">Thibaud Colas</a> -
  Content available under <a class="license" rel="license" href="https://creativecommons.org/publicdomain/zero/1.0/">CC0</a> -
  <span class="credit">Hosted on <a href="https://pages.github.com/">GitHub Pages</a></span> -
  <a class="fork-link" href="https://github.com/thibaudcolas/thibaudcolas">View source</a>
</p>

</footer>
  

<script src="/javascripts/libs/instantclick.min.js" data-no-instant></script>
<script data-no-instant>InstantClick.init(50);</script>


</body>
</html>
